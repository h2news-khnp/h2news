<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KHNP H2 News Archive</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <style>
        :root {
            --khnp-blue: #0054A6;
            --bg-light: #f8f9fa;
        }
        body {
            background-color: var(--bg-light);
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
        }
        header {
            background: linear-gradient(135deg, var(--khnp-blue), #003366);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .header-title {
            font-weight: 700;
        }
        .news-card {
            border: none;
            border-radius: 12px;
            overflow: hidden;
            transition: 0.3s ease;
            background: white;
            height: 100%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.15);
        }
        .card-img-top {
            height: 200px;
            object-fit: cover;
            background-color: #e9ecef;
        }
        .source-badge {
            background-color: #e7f1ff;
            color: var(--khnp-blue);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .card-text {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            color: #555;
        }
    </style>
</head>
<body>

<header class="text-center">
    <div class="container">
        <h1 class="header-title"><i class="fa-solid fa-atom me-2"></i>KHNP H2 News Archive</h1>
        <p class="mb-0 opacity-75">수소 에너지 관련 최신 뉴스 아카이브</p>
    </div>
</header>

<main class="container mb-5">

    <div class="row mb-4">
        <div class="col-12 text-end text-muted small">
            Last Updated: <span id="last-updated">Loading...</span>
        </div>
    </div>

    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="news-container">
    </div>

</main>

<footer class="text-center py-4 text-muted small border-top">
    &copy; 2024 KHNP H2 News Archive. Powered by GitHub Pages.
</footer>

<script>
async function loadNews() {
    const container = document.getElementById("news-container");
    container.innerHTML = `
        <div class="col-12 text-center py-5">
            <div class="spinner-border text-primary"></div>
            <p class="text-muted mt-3">Loading latest hydrogen news…</p>
        </div>
    `;

    try {
        // GitHub Pages에서는 상대경로 가능 → data/latest.json
        const res = await fetch("data/latest.json?" + Date.now());
        const articles = await res.json();

        container.innerHTML = "";
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("last-updated").innerText = today;

        articles.forEach(a => {
            const cardImg = a.image ? `data/${a.image}` : "https://via.placeholder.com/600x400?text=No+Image";

            const html = `
                <div class="col">
                    <div class="news-card">
                        <img src="${cardImg}" class="card-img-top" alt="뉴스 이미지" onerror="this.src='https://via.placeholder.com/600x400?text=Image+Error'">
                        <div class="card-body">
                            <div class="text-muted small mb-1">
                                <i class="far fa-calendar-alt me-1"></i>${a.date}
                            </div>
                            <h5 class="card-title">${a.title}</h5>
                            <p class="card-text">${a.summary}</p>

                            <div class="d-flex justify-content-between align-items-center mt-3 pt-3 border-top">
                                <span class="source-badge">${a.source}</span>
                                <a href="${a.url}" target="_blank" class="btn btn-sm btn-outline-primary">
                                    Read More <i class="fas fa-arrow-right ms-1"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            container.innerHTML += html;
        });

    } catch (error) {
        container.innerHTML = `
            <div class="col-12 text-center text-danger py-5">
                <i class="fas fa-exclamation-circle fa-3x mb-3"></i>
                <p>뉴스 데이터를 불러오는 중 문제가 발생했습니다.</p>
            </div>
        `;
        console.error(error);
    }
}

document.addEventListener("DOMContentLoaded", loadNews);
</script>

</body>
</html>
